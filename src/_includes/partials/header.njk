{% set current_lang = page.lang | default('en') %}
<header class="site-header" id="site-header" itemscope itemtype="https://schema.org/WPHeader">
  <div class="container header-container">
    <div class="logo">
      <a href="{{ '/' | locale_url }}" aria-label="Diaeta - {{ i18n.home[current_lang] | default('Accueil') }}">
        <img src="/images/logo.svg" alt="Diaeta Logo" width="142" height="50">
      </a>
    </div>
    <nav class="main-nav" id="main-nav" aria-label="{{ i18n.main_navigation[current_lang] | default('Navigation principale') }}" itemscope itemtype="https://schema.org/SiteNavigationElement">
      <ul class="nav-list">
        <li class="nav-item" itemprop="name"><a href="{{ '/' | locale_url }}" class="nav-link" itemprop="url">{{ i18n.home[current_lang] | default('Accueil') }}</a></li>

        <li class="nav-item dropdown" itemprop="name">
          <a class="nav-link dropdown-toggle" href="#" id="navDropdownAbout" role="button" data-bs-toggle="dropdown" aria-expanded="false" itemprop="url">
            {{ i18n.about[current_lang] | default('À Propos') }}
          </a>
          <ul class="dropdown-menu" aria-labelledby="navDropdownAbout">
            <li><a class="dropdown-item" href="{{ '/methode-diaeta/' | locale_url }}" itemprop="url"><span itemprop="name">{{ i18n.diaeta_method[current_lang] | default('La Méthode Diaeta') }}</span></a></li>
            <li><a class="dropdown-item" href="{{ '/notre-expertise/' | locale_url }}" itemprop="url"><span itemprop="name">{{ i18n.our_expertise[current_lang] | default('Notre Expertise') }}</span></a></li>
          </ul>
        </li>

        <li class="nav-item dropdown" itemprop="name">
          <a class="nav-link dropdown-toggle" href="#" id="navDropdownSpecialisations" role="button" data-bs-toggle="dropdown" aria-expanded="false" itemprop="url">
            {{ i18n.specialisations[current_lang] | default('Spécialisations') }}
          </a>
          <ul class="dropdown-menu" aria-labelledby="navDropdownSpecialisations">
            <li><a class="dropdown-item" href="{{ '/perte-de-poids/' | locale_url }}" itemprop="url"><span itemprop="name">{{ i18n.weight_loss[current_lang] | default('Perte de Poids') }}</span></a></li>
            <li><a class="dropdown-item" href="{{ '/syndrome-colon-irritable-fodmap/' | locale_url }}" itemprop="url"><span itemprop="name">{{ i18n.ibs[current_lang] | default('Syndrome Intestin Irritable') }}</span></a></li>
            <li><a class="dropdown-item" href="{{ '/diabete-type-2/' | locale_url }}" itemprop="url"><span itemprop="name">{{ i18n.diabetes_type_2[current_lang] | default('Diabète de Type 2') }}</span></a></li>
            <li><a class="dropdown-item" href="{{ '/hypertension-cholesterol/' | locale_url }}" itemprop="url"><span itemprop="name">{{ i18n.hypertension_cholesterol[current_lang] | default('Hypertension & Cholestérol') }}</span></a></li>
            <li><a class="dropdown-item" href="{{ '/tests-nutrigenetiques/' | locale_url }}" itemprop="url"><span itemprop="name">{{ i18n.nutrigenetic_tests[current_lang] | default('Tests Nutrigénétiques') }}</span></a></li>
          </ul>
        </li>

        <li class="nav-item" itemprop="name"><a href="{{ '/cabinets-bruxelles/' | locale_url }}" class="nav-link" itemprop="url">{{ i18n.cabinets[current_lang] | default('Cabinets') }}</a></li>
        <li class="nav-item" itemprop="name"><a href="{{ '/tarifs/' | locale_url }}" class="nav-link" itemprop="url">{{ i18n.tariffs[current_lang] | default('Tarifs') }}</a></li>
        <li class="nav-item" itemprop="name"><a href="{{ '/actualites/' | locale_url }}" class="nav-link" itemprop="url">{{ i18n.news[current_lang] | default('Actualités') }}</a></li>
        <li class="nav-item" itemprop="name"><a href="{{ '/contact/' | locale_url }}" class="nav-link" itemprop="url">{{ i18n.contact[current_lang] | default('Contact') }}</a></li>
      </ul>
      <div class="mobile-actions">
        {# Language Switcher - Mobile #}
        {% set current_page_url_stem = page.url | replace("/" + page.lang + "/", "/") %}
        <div class="lang-selector">
            <button class="lang-toggle" aria-expanded="false" aria-controls="lang-dropdown-mobile"><i class="fa-solid fa-globe" aria-hidden="true"></i><span>{{ current_lang | upper }}</span></button>
            <div class="lang-dropdown" id="lang-dropdown-mobile">
                {# Loop through available languages for the current page #}
                {%- for link in page.url | locale_links %}
                  {# Make sure that link.url is defined #}
                  {%- if link.url %}
                    <a href="{{ link.url }}" lang="{{ link.lang }}" hreflang="{{ link.lang }}" class="lang-option{% if link.lang == current_lang %} active{% endif %}" {% if link.lang == current_lang %}aria-current="true"{% endif %}>{{ i18n.language_name[link.lang] | default(link.lang) }}</a>
                  {%- endif %}
                {%- endfor %}
            </div>
        </div>
        <a href="tel:+32479355551" class="phone-link"><i class="fa-solid fa-phone" aria-hidden="true"></i><span>+32 479 35 55 51</span></a>
        <a href="{{ '/rendez-vous/' | locale_url }}" class="btn btn-secondary mobile-cta"><span>{{ i18n.book_appointment[current_lang] | default('Prendre Rendez-vous') }}</span></a>
      </div>
    </nav>
    <div class="desktop-actions">
        <a href="tel:+32479355551" class="phone-link" aria-label="{{ i18n.call_diaeta[current_lang] | default('Appeler Diaeta') }}"><i class="fa-solid fa-phone" aria-hidden="true"></i><span>+32 479 35 55 51</span></a>
        {# Language Switcher - Desktop #}
        <div class="lang-selector">
            <button class="lang-toggle" aria-expanded="false" aria-controls="lang-dropdown-desktop"><i class="fa-solid fa-globe" aria-hidden="true"></i><span>{{ current_lang | upper }}</span></button>
            <div class="lang-dropdown" id="lang-dropdown-desktop">
                {# Loop through available languages for the current page #}
                {%- for link in page.url | locale_links %}
                  {# Make sure that link.url is defined #}
                  {%- if link.url %}
                    <a href="{{ link.url }}" lang="{{ link.lang }}" hreflang="{{ link.lang }}" class="lang-option{% if link.lang == current_lang %} active{% endif %}" {% if link.lang == current_lang %}aria-current="true"{% endif %}>{{ i18n.language_name[link.lang] | default(link.lang) }}</a>
                  {%- endif %}
                {%- endfor %}
            </div>
        </div>
        <a href="{{ '/rendez-vous/' | locale_url }}" class="btn btn-secondary header-cta">{{ i18n.book_appointment[current_lang] | default('Prendre Rendez-vous') }}</a>
    </div>
    <button class="menu-toggle" aria-expanded="false" aria-controls="main-nav" aria-label="{{ i18n.menu[current_lang] | default('Menu') }}"><i class="fa-solid fa-bars" aria-hidden="true"></i></button>
  </div>
</header>